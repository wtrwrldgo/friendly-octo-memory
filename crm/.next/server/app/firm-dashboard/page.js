(()=>{var e={};e.id=4820,e.ids=[4820],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6474:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>c,routeModule:()=>g,tree:()=>x}),s(5931),s(3551),s(6560);var a=s(3191),t=s(8716),d=s(7922),l=s.n(d),n=s(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(r,i);let x=["",{children:["firm-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5931)),"/Users/musabekisakov/claudeCode/crm/app/firm-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3551)),"/Users/musabekisakov/claudeCode/crm/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,6560)),"/Users/musabekisakov/claudeCode/crm/app/not-found.tsx"]}],c=["/Users/musabekisakov/claudeCode/crm/app/firm-dashboard/page.tsx"],o="/firm-dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/firm-dashboard/page",pathname:"/firm-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:x}})},5098:(e,r,s)=>{Promise.resolve().then(s.bind(s,276))},276:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>v});var a=s(326),t=s(3136),d=s(6125),l=s(9178),n=s(7508),i=s(5047),x=s(7577),c=s(3855),o=s(1821),m=s(7069),g=s(7671),h=s(4228),u=s(4061),b=s(8705),p=s(6464),y=s(4230),j=s(5562);let f=(0,s(6557).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var N=s(9183);function v(){let{user:e,firm:r,loading:s}=(0,t.a)(),{theme:v}=(0,d.F)(),{t:k}=(0,n.ZK)(),{orders:w,ordersLoading:$,fetchOrders:C,drivers:Z,driversLoading:E,fetchDrivers:P,clients:M,clientsLoading:D,fetchClients:I}=(0,l.R)(),R=(0,i.useRouter)(),_=(0,x.useMemo)(()=>w.slice(0,5),[w]),A=(0,x.useMemo)(()=>({ordersCount:w.length,driversCount:Z.length,clientsCount:M.length,revenue:w.reduce((e,r)=>e+(r.total||0),0)}),[w,Z,M]);if(s||$||E||D)return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${"dark"===v?"bg-gray-950":"bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),a.jsx("p",{className:`mt-4 ${"dark"===v?"text-gray-400":"text-gray-600"}`,children:k.common.loading})]})});if(!e)return null;let L=Z.filter(e=>"ONLINE"===e.status||"DELIVERING"===e.status).length,G=_.filter(e=>"CONFIRMED"===e.status||"PREPARING"===e.status).length,O=_.filter(e=>{let r=new Date(e.createdAt),s=new Date;return r.toDateString()===s.toDateString()}).length,q=new Date,U=12>q.getHours()?k.dashboard.goodMorning:18>q.getHours()?k.dashboard.goodAfternoon:k.dashboard.goodEvening,V=e=>new Intl.NumberFormat("uz-UZ").format(e)+" UZS",S=e=>{switch(e){case"DELIVERED":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"CONFIRMED":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"PREPARING":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"DELIVERING":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"CANCELLED":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"}};return a.jsx("div",{className:`min-h-screen ${"dark"===v?"bg-gray-950":"bg-gray-50"}`,children:(0,a.jsxs)("div",{className:"p-4 md:p-6 lg:p-8 max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:`text-2xl md:text-3xl font-bold ${"dark"===v?"text-white":"text-gray-900"}`,children:[U,", ",e.name?.split(" ")[0]||"there","!"]}),(0,a.jsxs)("p",{className:`mt-1 ${"dark"===v?"text-gray-400":"text-gray-600"}`,children:[r?.name||"Your Firm"," â€¢ ",q.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),(0,a.jsxs)("button",{onClick:()=>R.push("/firm-order-create"),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors",children:[a.jsx(c.Z,{className:"w-5 h-5"}),a.jsx("span",{children:k.dashboard.newOrder})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:`p-4 md:p-5 rounded-2xl ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:a.jsx(o.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30",children:[a.jsx(m.Z,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),a.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"+12%"})]})]}),a.jsx("p",{className:"text-xs font-medium mb-1 text-gray-500",children:k.dashboard.totalRevenue}),a.jsx("p",{className:`text-lg md:text-xl font-bold ${"dark"===v?"text-white":"text-gray-900"}`,children:V(A.revenue)})]}),(0,a.jsxs)("div",{className:`p-4 md:p-5 rounded-2xl ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:a.jsx(g.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),G>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-xs font-medium text-yellow-600 dark:text-yellow-400",children:[G," ",k.dashboard.pending]})]}),a.jsx("p",{className:"text-xs font-medium mb-1 text-gray-500",children:k.dashboard.totalOrders}),a.jsx("p",{className:`text-lg md:text-xl font-bold ${"dark"===v?"text-white":"text-gray-900"}`,children:A.ordersCount})]}),(0,a.jsxs)("div",{className:`p-4 md:p-5 rounded-2xl ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:a.jsx(h.Z,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,a.jsxs)("span",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),(0,a.jsxs)("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:[L," ",k.dashboard.online]})]})]}),a.jsx("p",{className:"text-xs font-medium mb-1 text-gray-500",children:k.dashboard.activeDrivers}),a.jsx("p",{className:`text-lg md:text-xl font-bold ${"dark"===v?"text-white":"text-gray-900"}`,children:A.driversCount})]}),(0,a.jsxs)("div",{className:`p-4 md:p-5 rounded-2xl ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[a.jsx("div",{className:"flex items-center gap-3 mb-3",children:a.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:a.jsx(u.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),a.jsx("p",{className:"text-xs font-medium mb-1 text-gray-500",children:k.dashboard.totalClients}),a.jsx("p",{className:`text-lg md:text-xl font-bold ${"dark"===v?"text-white":"text-gray-900"}`,children:A.clientsCount})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[(0,a.jsxs)("button",{onClick:()=>R.push("/firm-orders"),className:`p-3 md:p-4 rounded-xl flex flex-col items-center gap-2 transition-colors ${"dark"===v?"bg-gray-900 border border-gray-800 hover:bg-gray-800":"bg-white shadow-sm hover:bg-gray-50"}`,children:[a.jsx(b.Z,{className:`w-5 h-5 ${"dark"===v?"text-blue-400":"text-blue-600"}`}),a.jsx("span",{className:`text-xs font-medium ${"dark"===v?"text-gray-300":"text-gray-700"}`,children:k.nav.orders})]}),(0,a.jsxs)("button",{onClick:()=>R.push("/firm-drivers"),className:`p-3 md:p-4 rounded-xl flex flex-col items-center gap-2 transition-colors ${"dark"===v?"bg-gray-900 border border-gray-800 hover:bg-gray-800":"bg-white shadow-sm hover:bg-gray-50"}`,children:[a.jsx(h.Z,{className:`w-5 h-5 ${"dark"===v?"text-orange-400":"text-orange-600"}`}),a.jsx("span",{className:`text-xs font-medium ${"dark"===v?"text-gray-300":"text-gray-700"}`,children:k.nav.drivers})]}),(0,a.jsxs)("button",{onClick:()=>R.push("/firm-clients"),className:`p-3 md:p-4 rounded-xl flex flex-col items-center gap-2 transition-colors ${"dark"===v?"bg-gray-900 border border-gray-800 hover:bg-gray-800":"bg-white shadow-sm hover:bg-gray-50"}`,children:[a.jsx(u.Z,{className:`w-5 h-5 ${"dark"===v?"text-purple-400":"text-purple-600"}`}),a.jsx("span",{className:`text-xs font-medium ${"dark"===v?"text-gray-300":"text-gray-700"}`,children:k.nav.clients})]}),(0,a.jsxs)("button",{onClick:()=>R.push("/firm-products"),className:`p-3 md:p-4 rounded-xl flex flex-col items-center gap-2 transition-colors ${"dark"===v?"bg-gray-900 border border-gray-800 hover:bg-gray-800":"bg-white shadow-sm hover:bg-gray-50"}`,children:[a.jsx(p.Z,{className:`w-5 h-5 ${"dark"===v?"text-green-400":"text-green-600"}`}),a.jsx("span",{className:`text-xs font-medium ${"dark"===v?"text-gray-300":"text-gray-700"}`,children:k.nav.products})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:`lg:col-span-2 rounded-2xl overflow-hidden ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[a.jsx("div",{className:"p-4 md:p-5 border-b border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:`text-lg font-semibold ${"dark"===v?"text-white":"text-gray-900"}`,children:k.dashboard.recentOrders}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[O," ",k.dashboard.ordersToday]})]}),(0,a.jsxs)("button",{onClick:()=>R.push("/firm-orders"),className:`flex items-center gap-1 text-sm font-medium ${"dark"===v?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:[k.dashboard.viewAll,a.jsx(y.Z,{className:"w-4 h-4"})]})]})}),0===_.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx(g.Z,{className:`w-12 h-12 mx-auto mb-3 ${"dark"===v?"text-gray-700":"text-gray-300"}`}),a.jsx("p",{className:"text-gray-500",children:k.dashboard.noOrders})]}):a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:_.map(e=>(0,a.jsxs)("div",{className:`p-4 flex items-center gap-4 cursor-pointer transition-colors ${"dark"===v?"hover:bg-gray-800/50":"hover:bg-gray-50"}`,onClick:()=>R.push(`/firm-orders?id=${e.id}`),children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center font-semibold text-white bg-gradient-to-br from-blue-500 to-blue-600",children:e.clientName?.charAt(0)||"?"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`font-medium truncate ${"dark"===v?"text-white":"text-gray-900"}`,children:e.clientName}),(0,a.jsxs)("p",{className:"text-sm truncate flex items-center gap-1 text-gray-500",children:[a.jsx(j.Z,{className:"w-3 h-3"}),e.address]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("span",{className:`inline-block px-2 py-1 rounded-lg text-xs font-medium ${S(e.status)}`,children:e.status}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:V(e.total||0)})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:`rounded-2xl p-4 md:p-5 ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(f,{className:`w-5 h-5 ${"dark"===v?"text-purple-400":"text-purple-600"}`}),a.jsx("h3",{className:`font-semibold ${"dark"===v?"text-white":"text-gray-900"}`,children:k.dashboard.todaysPerformance})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[a.jsx("span",{className:"dark"===v?"text-gray-400":"text-gray-600",children:k.dashboard.ordersCompleted}),(0,a.jsxs)("span",{className:`font-medium ${"dark"===v?"text-white":"text-gray-900"}`,children:[Math.floor(.7*A.ordersCount),"/",A.ordersCount]})]}),a.jsx("div",{className:`h-2 rounded-full ${"dark"===v?"bg-gray-800":"bg-gray-100"}`,children:a.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"70%"}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1.5",children:[a.jsx("span",{className:"dark"===v?"text-gray-400":"text-gray-600",children:k.dashboard.driverAvailability}),(0,a.jsxs)("span",{className:`font-medium ${"dark"===v?"text-white":"text-gray-900"}`,children:[L,"/",A.driversCount]})]}),a.jsx("div",{className:`h-2 rounded-full ${"dark"===v?"bg-gray-800":"bg-gray-100"}`,children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:A.driversCount>0?`${L/A.driversCount*100}%`:"0%"}})})]})]})]}),(0,a.jsxs)("div",{className:`rounded-2xl overflow-hidden ${"dark"===v?"bg-gray-900 border border-gray-800":"bg-white shadow-sm"}`,children:[a.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:`w-5 h-5 ${"dark"===v?"text-orange-400":"text-orange-600"}`}),a.jsx("h3",{className:`font-semibold ${"dark"===v?"text-white":"text-gray-900"}`,children:k.nav.drivers})]}),a.jsx("button",{onClick:()=>R.push("/firm-drivers"),className:`p-1.5 rounded-lg ${"dark"===v?"hover:bg-gray-800":"hover:bg-gray-100"}`,children:a.jsx(N.Z,{className:`w-4 h-4 ${"dark"===v?"text-gray-500":"text-gray-400"}`})})]})}),0===Z.length?(0,a.jsxs)("div",{className:"p-6 text-center",children:[a.jsx(h.Z,{className:`w-10 h-10 mx-auto mb-2 ${"dark"===v?"text-gray-700":"text-gray-300"}`}),a.jsx("p",{className:"text-sm text-gray-500",children:k.dashboard.noDrivers})]}):a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:Z.slice(0,4).map(e=>(0,a.jsxs)("div",{className:`p-3 flex items-center gap-3 ${"dark"===v?"hover:bg-gray-800/50":"hover:bg-gray-50"}`,children:[a.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center font-semibold text-sm text-white ${"ONLINE"===e.status||"DELIVERING"===e.status?"bg-green-500":"bg-gray-400"}`,children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm font-medium truncate ${"dark"===v?"text-white":"text-gray-900"}`,children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.carPlate})]}),a.jsx("span",{className:`w-2 h-2 rounded-full ${"ONLINE"===e.status?"bg-green-500":"DELIVERING"===e.status?"bg-blue-500":"bg-gray-400"}`})]},e.id))})]})]})]})]})})}},4230:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(6557).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6464:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(6557).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},5562:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(6557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3855:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7069:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(6557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5931:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/musabekisakov/claudeCode/crm/app/firm-dashboard/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[9276,972,4952],()=>s(6474));module.exports=a})();