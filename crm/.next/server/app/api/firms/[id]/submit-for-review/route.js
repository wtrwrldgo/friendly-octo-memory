"use strict";(()=>{var e={};e.id=578,e.ids=[578],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6179:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{PATCH:()=>d});var i=r(9303),o=r(8716),a=r(670),n=r(7070),u=r(1615),p=r(9487);async function d(e,{params:t}){try{let e=t.id,r=await (0,u.cookies)(),s=r.get("authToken")?.value,{data:i,error:o}=await p.db.getFirmById(e);if(o)throw o;if(!i)return n.NextResponse.json({error:"Firm not found"},{status:404});if("DRAFT"!==i.status)return n.NextResponse.json({error:`Cannot submit for review. Current status is ${i.status}. Only DRAFT firms can be submitted.`},{status:400});let{data:a,error:d}=await p.db.updateFirm(e,{status:"PENDING_REVIEW",submittedAt:new Date().toISOString(),rejectionReason:null},{authToken:s});if(d)throw d;return n.NextResponse.json({firm:a,message:"Firm submitted for review successfully. Awaiting WaterGo approval."},{status:200})}catch(e){return console.error("Error submitting firm for review:",e),n.NextResponse.json({error:e.message||"Failed to submit firm for review"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/firms/[id]/submit-for-review/route",pathname:"/api/firms/[id]/submit-for-review",filename:"route",bundlePath:"app/api/firms/[id]/submit-for-review/route"},resolvedPagePath:"/Users/musabekisakov/claudeCode/crm/app/api/firms/[id]/submit-for-review/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:f}=m,x="/api/firms/[id]/submit-for-review/route";function v(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,3752],()=>r(6179));module.exports=s})();