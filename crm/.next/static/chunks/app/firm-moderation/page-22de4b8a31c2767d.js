(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{8092:function(e,t,a){Promise.resolve().then(a.bind(a,496))},496:function(e,t,a){"use strict";a.d(t,{default:function(){return f}});var s=a(7437),l=a(2265),r=a(5863),i=a(5131),n=a(1723),o=a(5302),c=a(2252);let d=(0,a(9763).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var x=a(8420),m=a(8906),h=a(7168),u=a(3247),b=a(1313);let p="http://localhost:3001";function g(e){let{isOpen:t,firmName:a,onClose:n,onConfirm:o,loading:c}=e,[d,x]=(0,l.useState)("");return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm",onClick:n}),(0,s.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Reject Firm Application"}),(0,s.jsxs)("p",{className:"text-sm text-slate-500 mb-4",children:["Provide a reason for rejecting ",(0,s.jsx)("strong",{children:a}),". This will be visible to the firm owner."]}),(0,s.jsx)("textarea",{value:d,onChange:e=>x(e.target.value),placeholder:"Enter rejection reason...",className:"w-full p-3 border border-slate-200 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500/50 resize-none",rows:4}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,s.jsx)("button",{onClick:n,disabled:c,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-all disabled:opacity-50",children:"Cancel"}),(0,s.jsxs)("button",{onClick:()=>o(d),disabled:c||!d.trim(),className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[c?(0,s.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Reject"]})]})]})]}):null}function f(){var e,t;let[a,f]=(0,l.useState)([]),[y,j]=(0,l.useState)(!0),[N,w]=(0,l.useState)(null),[v,k]=(0,l.useState)(""),[E,C]=(0,l.useState)(""),[Z,A]=(0,l.useState)(""),[I,S]=(0,l.useState)("PENDING_REVIEW"),[D,R]=(0,l.useState)({isOpen:!1,firm:null});(0,l.useEffect)(()=>{F()},[]);let F=async()=>{j(!0),k("");try{let e=localStorage.getItem("auth_token"),t=await fetch("".concat(p,"/api/firms"),{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();if(a.success){let e=(a.data||[]).map(e=>{var t;return{...e,logoUrl:(t=e.logoUrl)?t.startsWith("http")?t:"".concat(p).concat(t):null}});f(e)}else throw Error(a.message||"Failed to fetch firms")}catch(e){k(e.message||"Failed to load firms")}finally{j(!1)}},L=async e=>{w(e.id),k(""),C("");try{let t=localStorage.getItem("auth_token"),a=await fetch("".concat(p,"/api/firms/").concat(e.id,"/approve"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),s=await a.json();if(s.success)C("".concat(e.name," has been approved and is now visible in the client app!")),F();else throw Error(s.message||"Failed to approve firm")}catch(e){k(e.message||"Failed to approve firm")}finally{w(null)}},P=async e=>{if(!D.firm)return;let t=D.firm;w(t.id),k(""),C("");try{let a=localStorage.getItem("auth_token"),s=await fetch("".concat(p,"/api/firms/").concat(t.id,"/reject"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({reason:e})}),l=await s.json();if(l.success)C("".concat(t.name," has been rejected. The owner will be notified.")),R({isOpen:!1,firm:null}),F();else throw Error(l.message||"Failed to reject firm")}catch(e){k(e.message||"Failed to reject firm")}finally{w(null)}},T=async e=>{w(e.id),k(""),C("");try{let t=localStorage.getItem("auth_token"),a=await fetch("".concat(p,"/api/firms/").concat(e.id,"/suspend"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),s=await a.json();if(s.success)C("".concat(e.name," has been hidden from the client app.")),F();else throw Error(s.message||"Failed to hide firm")}catch(e){k(e.message||"Failed to hide firm")}finally{w(null)}},M=async e=>{w(e.id),k(""),C("");try{let t=localStorage.getItem("auth_token"),a=await fetch("".concat(p,"/api/firms/").concat(e.id,"/reactivate"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),s=await a.json();if(s.success)C("".concat(e.name," has been reactivated and is now visible in the client app!")),F();else throw Error(s.message||"Failed to reactivate firm")}catch(e){k(e.message||"Failed to reactivate firm")}finally{w(null)}},_=a.filter(e=>{var t;let a=e.name.toLowerCase().includes(Z.toLowerCase())||(null===(t=e.city)||void 0===t?void 0:t.toLowerCase().includes(Z.toLowerCase())),s="ALL"===I||e.status===I;return a&&s}),V=[{key:"PENDING_REVIEW",label:"Pending Review",icon:(0,s.jsx)(n.Z,{className:"w-4 h-4"}),count:a.filter(e=>"PENDING_REVIEW"===e.status).length},{key:"ACTIVE",label:"Active",icon:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),count:a.filter(e=>"ACTIVE"===e.status).length},{key:"DRAFT",label:"Draft",icon:(0,s.jsx)(c.Z,{className:"w-4 h-4"}),count:a.filter(e=>"DRAFT"===e.status).length},{key:"SUSPENDED",label:"Suspended",icon:(0,s.jsx)(d,{className:"w-4 h-4"}),count:a.filter(e=>"SUSPENDED"===e.status).length},{key:"ALL",label:"All Firms",icon:(0,s.jsx)(x.Z,{className:"w-4 h-4"}),count:a.length}];return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center shadow-lg shadow-violet-500/30",children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Firm Moderation"}),(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Review and approve firm applications"})]})]}),(0,s.jsxs)("button",{onClick:F,disabled:y,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-all disabled:opacity-50",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 ".concat(y?"animate-spin":"")}),"Refresh"]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 pt-6",children:[v&&(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 relative z-50",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:v})]}),E&&(0,s.jsxs)("div",{className:"mb-4 p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center gap-3 relative z-50",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 text-emerald-500"}),(0,s.jsx)("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:E})]})]}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:V.map(e=>(0,s.jsxs)("button",{onClick:()=>S(e.key),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl font-semibold transition-all ".concat(I===e.key?"bg-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"),children:[e.icon,e.label,e.count>0&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold ".concat(I===e.key?"bg-white/20 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"),children:e.count})]},e.key))}),(0,s.jsxs)("div",{className:"relative w-full lg:w-80",children:[(0,s.jsx)(u.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"text",value:Z,onChange:e=>A(e.target.value),placeholder:"Search firms...",className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-500/50"})]})]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 pb-8",children:y?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(r.Z,{className:"w-8 h-8 text-violet-500 animate-spin"})}):0===_.length?(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-8 h-8 text-slate-400"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No firms found"}),(0,s.jsx)("p",{className:"text-slate-500",children:"PENDING_REVIEW"===I?"No firms are waiting for review":"No firms match your search criteria"})]}):(0,s.jsx)("div",{className:"grid gap-4",children:_.map(e=>(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 hover:shadow-lg transition-all",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 flex items-center justify-center overflow-hidden",children:e.logoUrl?(0,s.jsx)("img",{src:e.logoUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)(x.Z,{className:"w-7 h-7 text-slate-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:e.city||"No city"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsx)(b.Z,{status:e.status}),e.isVisibleInClientApp&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-medium",children:[(0,s.jsx)(o.Z,{className:"w-3 h-3"}),"Visible in App"]})]}),e.rejectionReason&&"DRAFT"===e.status&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-red-500 bg-red-50 dark:bg-red-900/20 px-3 py-2 rounded-lg",children:[(0,s.jsx)("strong",{children:"Previous rejection:"})," ",e.rejectionReason]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:["PENDING_REVIEW"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>L(e),disabled:N===e.id,className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[N===e.id?(0,s.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(o.Z,{className:"w-4 h-4"}),"Approve & Go Live"]}),(0,s.jsxs)("button",{onClick:()=>R({isOpen:!0,firm:e}),disabled:N===e.id,className:"flex items-center gap-2 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Reject"]})]}),"ACTIVE"===e.status&&(0,s.jsxs)("button",{onClick:()=>T(e),disabled:N===e.id,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-500 hover:bg-slate-600 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[N===e.id?(0,s.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(d,{className:"w-4 h-4"}),"Hide from App"]}),"SUSPENDED"===e.status&&(0,s.jsxs)("button",{onClick:()=>M(e),disabled:N===e.id,className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[N===e.id?(0,s.jsx)(r.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(o.Z,{className:"w-4 h-4"}),"Reactivate"]}),"DRAFT"===e.status&&(0,s.jsx)("span",{className:"text-sm text-slate-500 italic",children:"Waiting for firm to submit"})]})]})},e.id))})}),(0,s.jsx)(g,{isOpen:D.isOpen,firmName:(null===(e=D.firm)||void 0===e?void 0:e.name)||"",onClose:()=>R({isOpen:!1,firm:null}),onConfirm:P,loading:N===(null===(t=D.firm)||void 0===t?void 0:t.id)})]})}},1313:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437);let l={ACTIVE:{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"},SUSPENDED:{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"},ONLINE:{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"},OFFLINE:{bg:"bg-gray-100",text:"text-gray-700",dot:"bg-gray-400"},DELIVERING:{bg:"bg-blue-50",text:"text-blue-700",dot:"bg-blue-500"},PENDING:{bg:"bg-amber-50",text:"text-amber-700",dot:"bg-amber-500"},ASSIGNED:{bg:"bg-blue-50",text:"text-blue-700",dot:"bg-blue-500"},ON_THE_WAY:{bg:"bg-purple-50",text:"text-purple-700",dot:"bg-purple-500"},DELIVERED:{bg:"bg-emerald-50",text:"text-emerald-700",dot:"bg-emerald-500"},CANCELLED:{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"},DRAFT:{bg:"bg-gray-100",text:"text-gray-700",dot:"bg-gray-400"},PENDING_REVIEW:{bg:"bg-amber-50",text:"text-amber-700",dot:"bg-amber-500"},CONFIRMED:{bg:"bg-cyan-50",text:"text-cyan-700",dot:"bg-cyan-500"},PREPARING:{bg:"bg-indigo-50",text:"text-indigo-700",dot:"bg-indigo-500"}};function r(e){let{status:t}=e,a=l[t];return(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 rounded-full text-xs font-semibold ".concat(a.bg," ").concat(a.text," border border-current/10"),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(a.dot," animate-pulse")}),t]})}},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:x="",children:m,...h}=a;return(0,s.createElement)("svg",{ref:i,...l,width:o,height:o,stroke:n,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(r(e)),x].join(" "),...h},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},2252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8420:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5302:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5863:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7168:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},5131:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8092)}),_N_E=e.O()}]);