(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{3453:function(e,t,a){Promise.resolve().then(a.bind(a,1522))},1522:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var r=a(7437),s=a(6281),n=a(1258),l=a(9376),i=a(2265),d=a(4893),o=a(3404),c=a(5252),x=a(1047),h=a(6221),m=a(9763);let g=(0,m.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var u=a(525);let y=(0,m.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);var p=a(8226);let f=(0,m.Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),b=(0,m.Z)("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);var w=a(9397),k=a(2023);let v=(0,m.Z)("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),N=(0,m.Z)("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),j=(0,m.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),E=(0,m.Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);var S=a(3247),Z=a(5868),I=a(8930),C=a(3229);function M(){let{user:e}=(0,s.a)(),{t}=(0,n.ZK)(),a=(0,l.useRouter)(),[m,M]=(0,i.useState)(!0),[D,L]=(0,i.useState)("ALL"),[R,O]=(0,i.useState)("month"),[P,V]=(0,i.useState)(""),[A,U]=(0,i.useState)(!1),[T,_]=(0,i.useState)(null),[q,X]=(0,i.useState)({type:"REVENUE",category:"",amount:"",description:""}),[W,z]=(0,i.useState)([{id:"txn-001",firmId:"1",type:"REVENUE",category:"Delivery Orders",amount:15e3,description:"150 water deliveries - Tashkent region",date:new Date().toISOString(),orderId:"ord-001"},{id:"txn-002",firmId:"1",type:"REVENUE",category:"B2B Contract",amount:2e4,description:"Tech Solutions LLC - Monthly contract",date:new Date(Date.now()-864e5).toISOString()},{id:"txn-003",firmId:"1",type:"EXPENSE",category:"Fuel & Maintenance",amount:3500,description:"Vehicle fuel and maintenance - All drivers",date:new Date(Date.now()-1728e5).toISOString()},{id:"txn-004",firmId:"1",type:"EXPENSE",category:"Salaries",amount:12e3,description:"Staff salaries - October 2024",date:new Date(Date.now()-2592e5).toISOString()},{id:"txn-005",firmId:"1",type:"REVENUE",category:"B2G Contract",amount:1e4,description:"Tashkent City Hall - Government contract",date:new Date(Date.now()-3456e5).toISOString()},{id:"txn-006",firmId:"1",type:"EXPENSE",category:"Water Supply",amount:8e3,description:"Wholesale water purchase - 5000 bottles",date:new Date(Date.now()-432e6).toISOString()},{id:"txn-007",firmId:"1",type:"EXPENSE",category:"Rent & Utilities",amount:4500,description:"Office and warehouse rent - Monthly",date:new Date(Date.now()-5184e5).toISOString()},{id:"txn-008",firmId:"1",type:"REVENUE",category:"Delivery Orders",amount:12500,description:"125 water deliveries - Samarkand region",date:new Date(Date.now()-6048e5).toISOString()},{id:"txn-009",firmId:"1",type:"EXPENSE",category:"Marketing",amount:2800,description:"Social media advertising campaign",date:new Date(Date.now()-6912e5).toISOString()},{id:"txn-010",firmId:"1",type:"REVENUE",category:"Delivery Orders",amount:1e4,description:"100 water deliveries - Bukhara region",date:new Date(Date.now()-7776e5).toISOString()},{id:"txn-011",firmId:"1",type:"EXPENSE",category:"Equipment",amount:2e3,description:"New delivery equipment and bottles",date:new Date(Date.now()-864e6).toISOString()}]);if((0,i.useEffect)(()=>{if(!e){a.push("/login");return}let t=setTimeout(()=>M(!1),500);return()=>clearTimeout(t)},[e,a]),!e)return null;if(m)return(0,r.jsx)("div",{className:"p-8 min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-200 dark:border-emerald-900"}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-emerald-600 animate-spin"}),(0,r.jsx)(c.Z,{className:"absolute inset-0 m-auto w-8 h-8 text-emerald-600"})]}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.finances.loading}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.finances.pleaseWait})]})});let F=e=>{let t=new Date,a=new Date;switch(e){case"day":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setMonth(t.getMonth()-1);break;case"year":a.setFullYear(t.getFullYear()-1)}return W.filter(e=>new Date(e.date)>=a)},H=(e=>{let t=F(e),a=t.filter(e=>"REVENUE"===e.type).reduce((e,t)=>e+t.amount,0),r=t.filter(e=>"EXPENSE"===e.type).reduce((e,t)=>e+t.amount,0),s=a-r;return{revenue:a,expenses:r,profit:s,margin:a>0?s/a*100:0}})(R),$=W.filter(e=>"REVENUE"===e.type).reduce((e,t)=>e+t.amount,0),B=W.filter(e=>"EXPENSE"===e.type).reduce((e,t)=>e+t.amount,0),G=e=>{_(e),X({type:e.type,category:e.category,amount:e.amount.toString(),description:e.description}),U(!0)},J=e=>{confirm(t.finances.deleteConfirm)&&z(W.filter(t=>t.id!==e))},Y=W.filter(e=>{let t="ALL"===D||e.type===D,a=""===P||e.category.toLowerCase().includes(P.toLowerCase())||e.description.toLowerCase().includes(P.toLowerCase());return t&&a}),K=W.filter(e=>"REVENUE"===e.type),Q=W.filter(e=>"EXPENSE"===e.type),ee=e=>{switch(e){case"day":return t.finances.today;case"week":return t.finances.thisWeek;case"month":return t.finances.thisMonth;case"year":return t.finances.thisYear}},et=e=>{switch(e){case"day":return(0,r.jsx)(x.Z,{className:"w-4 h-4"});case"week":return(0,r.jsx)(h.Z,{className:"w-4 h-4"});case"month":return(0,r.jsx)(g,{className:"w-4 h-4"});case"year":return(0,r.jsx)(u.Z,{className:"w-4 h-4"})}},ea=e=>e.toLowerCase().includes("delivery")||e.toLowerCase().includes("order")?(0,r.jsx)(y,{className:"w-4 h-4"}):e.toLowerCase().includes("contract")||e.toLowerCase().includes("b2b")||e.toLowerCase().includes("b2g")?(0,r.jsx)(p.Z,{className:"w-4 h-4"}):e.toLowerCase().includes("salary")||e.toLowerCase().includes("salaries")?(0,r.jsx)(f,{className:"w-4 h-4"}):(0,r.jsx)(b,{className:"w-4 h-4"});return(0,r.jsxs)("div",{className:"p-8 min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)(d.Z,{title:t.finances.title,description:t.finances.description}),(0,r.jsxs)("button",{onClick:()=>{_(null),X({type:"REVENUE",category:"",amount:"",description:""}),U(!0)},className:"group flex items-center gap-2 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white px-6 py-3.5 rounded-2xl font-semibold shadow-xl shadow-emerald-500/30 transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-emerald-500/40",children:[(0,r.jsx)(w.Z,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),t.finances.addTransaction,(0,r.jsx)(k.Z,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-emerald-500 to-green-600 p-6 rounded-3xl shadow-xl shadow-emerald-500/20 hover:shadow-2xl hover:shadow-emerald-500/30 transition-all duration-300 hover:scale-[1.02] overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center",children:(0,r.jsx)(v,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4 text-white/80"}),(0,r.jsx)("span",{className:"text-xs font-medium text-white/80",children:"+12%"})]})]}),(0,r.jsxs)("p",{className:"text-4xl font-black text-white mb-1",children:["$",$.toLocaleString()]}),(0,r.jsx)("p",{className:"text-sm text-white/80 font-medium",children:t.finances.totalRevenue})]})]}),(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-red-500 to-rose-600 p-6 rounded-3xl shadow-xl shadow-red-500/20 hover:shadow-2xl hover:shadow-red-500/30 transition-all duration-300 hover:scale-[1.02] overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center",children:(0,r.jsx)(N,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(j,{className:"w-4 h-4 text-white/80"}),(0,r.jsx)("span",{className:"text-xs font-medium text-white/80",children:"-5%"})]})]}),(0,r.jsxs)("p",{className:"text-4xl font-black text-white mb-1",children:["$",B.toLocaleString()]}),(0,r.jsx)("p",{className:"text-sm text-white/80 font-medium",children:t.finances.totalExpenses})]})]}),(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-3xl shadow-xl shadow-blue-500/20 hover:shadow-2xl hover:shadow-blue-500/30 transition-all duration-300 hover:scale-[1.02] overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center",children:(0,r.jsx)(E,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-white/80 bg-white/20 px-3 py-1 rounded-full",children:t.finances.profit})]}),(0,r.jsxs)("p",{className:"text-4xl font-black text-white mb-1",children:["$",($-B).toLocaleString()]}),(0,r.jsx)("p",{className:"text-sm text-white/80 font-medium",children:t.finances.netProfit})]})]}),(0,r.jsxs)("div",{className:"group relative bg-gradient-to-br from-purple-500 to-violet-600 p-6 rounded-3xl shadow-xl shadow-purple-500/20 hover:shadow-2xl hover:shadow-purple-500/30 transition-all duration-300 hover:scale-[1.02] overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center",children:(0,r.jsx)(g,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-white/80 bg-white/20 px-3 py-1 rounded-full",children:($-B)/$*100>35?t.finances.excellent:t.finances.good})]}),(0,r.jsxs)("p",{className:"text-4xl font-black text-white mb-1",children:[$>0?(($-B)/$*100).toFixed(1):0,"%"]}),(0,r.jsx)("p",{className:"text-sm text-white/80 font-medium",children:t.finances.profitMargin})]})]})]}),(0,r.jsx)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl p-6 shadow-xl shadow-gray-200/50 dark:shadow-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,r.jsx)("div",{className:"flex gap-2",children:["day","week","month","year"].map(e=>(0,r.jsxs)("button",{onClick:()=>O(e),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 ".concat(R===e?"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg shadow-emerald-500/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[et(e),ee(e)]},e))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(S.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:P,onChange:e=>V(e.target.value),placeholder:t.finances.searchPlaceholder,className:"w-72 pl-12 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"})]})]})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-emerald-600"}),ee(R)," ",t.finances.performance]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-5 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:(0,r.jsx)(v,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.finances.revenue})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:["$",H.revenue.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-5 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30",children:(0,r.jsx)(N,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.finances.expenses})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["$",H.expenses.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-5 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30",children:(0,r.jsx)(E,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.finances.profit})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",H.profit.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl p-5 rounded-2xl border border-gray-200/50 dark:border-gray-700/50 shadow-lg hover:shadow-xl transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:(0,r.jsx)(g,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.finances.margin})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[H.margin.toFixed(1),"%"]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,r.jsx)(y,{className:"w-5 h-5 text-emerald-600"}),t.finances.allTransactions]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>L("ALL"),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ".concat("ALL"===D?"bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-200 text-white dark:text-gray-900 shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[t.finances.all," (",W.length,")"]}),(0,r.jsxs)("button",{onClick:()=>L("REVENUE"),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ".concat("REVENUE"===D?"bg-gradient-to-r from-emerald-600 to-green-600 text-white shadow-lg shadow-emerald-500/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,r.jsx)(v,{className:"w-4 h-4"}),t.finances.revenue," (",K.length,")"]}),(0,r.jsxs)("button",{onClick:()=>L("EXPENSE"),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all ".concat("EXPENSE"===D?"bg-gradient-to-r from-red-600 to-rose-600 text-white shadow-lg shadow-red-500/30":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,r.jsx)(N,{className:"w-4 h-4"}),t.finances.expenses," (",Q.length,")"]})]})]}),(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-xl shadow-gray-200/50 dark:shadow-gray-900/50 overflow-hidden border border-gray-200/50 dark:border-gray-700/50",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/80 dark:from-gray-700/80 dark:to-gray-800/80 border-b border-gray-200/50 dark:border-gray-600/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.date}),(0,r.jsx)("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.type}),(0,r.jsx)("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.category}),(0,r.jsx)("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.descriptionLabel}),(0,r.jsx)("th",{className:"px-6 py-5 text-right text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.amount}),(0,r.jsx)("th",{className:"px-6 py-5 text-right text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:t.finances.actions})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:0===Y.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-16 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-2xl flex items-center justify-center mb-4",children:(0,r.jsx)(y,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t.finances.noTransactions}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.finances.tryAdjustingFilters})]})})}):Y.map((e,a)=>(0,r.jsxs)("tr",{className:"group transition-all duration-300 ".concat("REVENUE"===e.type?"hover:bg-gradient-to-r hover:from-emerald-50/50 hover:to-green-50/50 dark:hover:from-emerald-900/10 dark:hover:to-green-900/10":"hover:bg-gradient-to-r hover:from-red-50/50 hover:to-rose-50/50 dark:hover:from-red-900/10 dark:hover:to-rose-900/10"),style:{animationDelay:"".concat(50*a,"ms")},children:[(0,r.jsx)("td",{className:"px-6 py-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.date).getFullYear()})]})]})}),(0,r.jsx)("td",{className:"px-6 py-5",children:"REVENUE"===e.type?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-bold bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg shadow-emerald-500/30",children:[(0,r.jsx)(v,{className:"w-3.5 h-3.5"}),t.finances.revenue]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-bold bg-gradient-to-r from-red-500 to-rose-500 text-white shadow-lg shadow-red-500/30",children:[(0,r.jsx)(N,{className:"w-3.5 h-3.5"}),t.finances.expense]})}),(0,r.jsx)("td",{className:"px-6 py-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center ".concat("REVENUE"===e.type?"bg-emerald-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"),children:ea(e.category)}),(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:e.category})]})}),(0,r.jsx)("td",{className:"px-6 py-5",children:(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:e.description})}),(0,r.jsx)("td",{className:"px-6 py-5 text-right",children:(0,r.jsxs)("span",{className:"text-xl font-bold ".concat("REVENUE"===e.type?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:["REVENUE"===e.type?"+":"-","$",e.amount.toLocaleString()]})}),(0,r.jsx)("td",{className:"px-6 py-5",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,r.jsx)("button",{onClick:()=>G(e),className:"p-2.5 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-xl transition-all hover:scale-110",title:"Edit",children:(0,r.jsx)(Z.Z,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("button",{onClick:()=>J(e.id),className:"p-2.5 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/50 rounded-xl transition-all hover:scale-110",title:"Delete",children:(0,r.jsx)(I.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]})})]},e.id))})]})}),Y.length>0&&(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-50/80 dark:bg-gray-700/30 border-t border-gray-200/50 dark:border-gray-600/50",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.finances.showing," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:Y.length})," ",t.finances.of," ",(0,r.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:W.length})," ",t.finances.transactions]})})]})]}),(0,r.jsx)(o.Z,{isOpen:A,onClose:()=>U(!1),title:T?t.finances.editTransaction:t.finances.addNewTransaction,children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T?z(W.map(e=>e.id===T.id?{...e,type:q.type,category:q.category,amount:parseFloat(q.amount),description:q.description}:e)):z([{id:"txn-".concat(Date.now()),firmId:"1",type:q.type,category:q.category,amount:parseFloat(q.amount),description:q.description,date:new Date().toISOString()},...W]),U(!1)},className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:t.finances.transactionType}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>X({...q,type:"REVENUE"}),className:"flex items-center justify-center gap-2 p-4 rounded-xl border-2 font-semibold transition-all ".concat("REVENUE"===q.type?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-emerald-300"),children:[(0,r.jsx)(v,{className:"w-5 h-5"}),t.finances.revenue]}),(0,r.jsxs)("button",{type:"button",onClick:()=>X({...q,type:"EXPENSE"}),className:"flex items-center justify-center gap-2 p-4 rounded-xl border-2 font-semibold transition-all ".concat("EXPENSE"===q.type?"border-red-500 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400":"border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-red-300"),children:[(0,r.jsx)(N,{className:"w-5 h-5"}),t.finances.expense]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:t.finances.category}),(0,r.jsx)("input",{type:"text",value:q.category,onChange:e=>X({...q,category:e.target.value}),placeholder:t.finances.categoryPlaceholder,className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:t.finances.amountLabel}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:q.amount,onChange:e=>X({...q,amount:e.target.value}),placeholder:"0.00",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:t.finances.descriptionLabel}),(0,r.jsx)("textarea",{value:q.description,onChange:e=>X({...q,description:e.target.value}),placeholder:t.finances.descriptionPlaceholder,className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",rows:3,required:!0})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>U(!1),className:"flex-1 px-6 py-3.5 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:t.finances.cancel}),(0,r.jsxs)("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 text-white px-6 py-3.5 rounded-xl font-semibold shadow-lg transition-all hover:scale-[1.02] ".concat("REVENUE"===q.type?"bg-gradient-to-r from-emerald-600 to-green-600 shadow-emerald-500/30":"bg-gradient-to-r from-red-600 to-rose-600 shadow-red-500/30"),children:[(0,r.jsx)(C.Z,{className:"w-5 h-5"}),T?t.finances.update:t.finances.create]})]})]})})]})}},3404:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(7437),s=a(2489);function n(e){let{isOpen:t,onClose:a,title:n,children:l,size:i="md"}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),(0,r.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full ".concat({sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"}[i]," max-h-[90vh] overflow-hidden"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-navy-900 dark:text-white",children:n}),(0,r.jsx)("button",{onClick:a,className:"w-10 h-10 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:(0,r.jsx)(s.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-5rem)]",children:l})]})]}):null}},4893:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(7437);function s(e){let{title:t,description:a,action:s}=e;return(0,r.jsxs)("div",{className:"flex items-start justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-navy-900 via-navy-700 to-primary dark:from-blue-400 dark:via-blue-300 dark:to-blue-500 bg-clip-text text-transparent mb-2",children:t}),a&&(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:a})]}),s&&(0,r.jsx)("div",{children:s})]})}},6281:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return d},a:function(){return o}});var r=a(7437),s=a(2265),n=a(9376);let l="/api",i=(0,s.createContext)(void 0);function d(e){let{children:t}=e,[a,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0),u=(0,n.useRouter)();(0,n.usePathname)(),(0,s.useEffect)(()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user"),a=localStorage.getItem("auth_firm");e&&t&&(h(e),d(JSON.parse(t)),a&&c(JSON.parse(a))),g(!1)},[]);let y=async()=>{d(null),c(null),h(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_firm"),localStorage.removeItem("userType"),localStorage.removeItem("userEmail"),localStorage.removeItem("firmId"),document.cookie="auth-token=; path=/; max-age=0",u.push("/login")},p={user:a,profile:a,token:x,loading:m,signIn:async(e,t)=>{try{console.log("Signing in with API_URL:",l);let a=await fetch("".concat(l,"/auth/staff/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});console.log("Response status:",a.status);let r=await a.json();if(console.log("Response data:",r),!a.ok)throw Error(r.message||"Invalid email or password");let{token:s,user:n,firm:i}=r.data;return h(s),d(n),c(i),localStorage.setItem("auth_token",s),localStorage.setItem("auth_user",JSON.stringify(n)),i&&localStorage.setItem("auth_firm",JSON.stringify(i)),document.cookie="auth-token=".concat(s,"; path=/; max-age=").concat(2592e3),localStorage.setItem("userType","WATERGO_ADMIN"===n.role?"admin":"firm"),localStorage.setItem("userEmail",n.email),n.firmId&&localStorage.setItem("firmId",n.firmId),{error:null,user:n}}catch(e){return console.error("Sign in error:",e),{error:e}}},signOut:y,logout:y,isOwner:(null==a?void 0:a.role)==="OWNER",isManager:(null==a?void 0:a.role)==="MANAGER",isOperator:(null==a?void 0:a.role)==="OPERATOR",isWatergoAdmin:(null==a?void 0:a.role)==="WATERGO_ADMIN",canAccessAllBranches:(null==a?void 0:a.role)==="OWNER"||(null==a?void 0:a.role)==="WATERGO_ADMIN",firm:o,updateFirm:e=>{if(o){let t={...o,...e};c(t),localStorage.setItem("auth_firm",JSON.stringify(t))}}};return(0,r.jsx)(i.Provider,{value:p,children:t})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{color:i="currentColor",size:d=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:x="",children:h,...m}=a;return(0,r.createElement)("svg",{ref:l,...s,width:d,height:d,stroke:i,strokeWidth:c?24*Number(o)/Number(d):o,className:["lucide","lucide-".concat(n(e)),x].join(" "),...m},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},6221:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},8226:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5252:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9397:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3229:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},5868:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},525:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[258,971,117,744],function(){return e(e.s=3453)}),_N_E=e.O()}]);