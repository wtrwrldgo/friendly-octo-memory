(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{8054:function(e,t,r){Promise.resolve().then(r.bind(r,4676))},4676:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var s=r(7437),a=r(1239),l=r(8617),i=r(44),n=r(2660),o=r(3639),c=r(401),d=r(7648),u=r(3145),m=r(2265),g=r(8116),x=r(6281),h=r(1258);let p="".concat("http://45.92.173.121/api".replace("/api",""),"/static/firms/watergo-logo.png"),f=[{id:"BASIC",name:"Basic",price:"Coming soon",description:"Perfect for small water delivery businesses",icon:a.Z,features:["Up to 100 orders/month","1 branch","3 staff members","Basic analytics","Email support"],color:"bg-blue-600",borderColor:"border-blue-200",bgColor:"bg-blue-50",coming:!0},{id:"PRO",name:"Pro",price:"Coming soon",description:"For growing businesses with multiple branches",icon:l.Z,features:["Up to 500 orders/month","5 branches","10 staff members","Advanced analytics","Priority support","Driver tracking"],color:"bg-purple-600",borderColor:"border-purple-300",bgColor:"bg-purple-50",coming:!0,popular:!0},{id:"MAX",name:"Max",price:"Coming soon",description:"For large enterprises with unlimited needs",icon:i.Z,features:["Unlimited orders","Unlimited branches","Unlimited staff","Custom analytics","Dedicated support","API access","White-label options"],color:"bg-gray-800",borderColor:"border-gray-300",bgColor:"bg-gray-50",coming:!0}];function b(){let{subscription:e}=(0,g.m)(),{profile:t,firm:r}=(0,x.a)(),{t:a}=(0,h.ZK)(),[l,i]=(0,m.useState)(!1),b=(null==t?void 0:t.role)==="OWNER"?"/":"/firm-dashboard";return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,s.jsxs)(d.default,{href:b,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5"}),a.pricing.backToDashboard]}),(null==e?void 0:e.status)==="TRIAL_ACTIVE"&&null!==e.daysRemaining&&(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:e.daysRemaining})," ",a.pricing.daysRemaining]})]})}),(0,s.jsx)("main",{className:"px-6 py-12",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:a.pricing.chooseYourPlan}),(0,s.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:a.pricing.scaleYourBusiness})]}),e&&(0,s.jsx)("div",{className:"rounded-2xl border-2 p-8 mb-10 ".concat("TRIAL_EXPIRED"===e.status?"bg-red-50 border-red-200":"TRIAL_ACTIVE"===e.status?"bg-blue-50 border-blue-200":"bg-green-50 border-green-200"),children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center overflow-hidden ".concat("TRIAL_EXPIRED"===e.status?"bg-red-100":"TRIAL_ACTIVE"===e.status?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-green-500 to-emerald-600"),children:((null==t?void 0:t.role)==="WATERGO_ADMIN"||(null==r?void 0:r.logoUrl))&&!l?(0,s.jsx)(u.default,{src:(null==t?void 0:t.role)==="WATERGO_ADMIN"?p:(null==r?void 0:r.logoUrl)||"",alt:(null==t?void 0:t.role)==="WATERGO_ADMIN"?"WaterGo":(null==r?void 0:r.name)||"Firm logo",width:64,height:64,className:"w-full h-full object-cover",onError:()=>i(!0),unoptimized:!0}):"TRIAL_EXPIRED"===e.status?(0,s.jsx)(o.Z,{className:"w-8 h-8 text-red-600"}):(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:((null==r?void 0:r.name)||"W").charAt(0).toUpperCase()})})}),(0,s.jsxs)("div",{children:[(null==r?void 0:r.name)&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:r.name}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold ".concat("TRIAL_EXPIRED"===e.status?"text-red-900":"TRIAL_ACTIVE"===e.status?"text-blue-900":"text-green-900"),children:["TRIAL_ACTIVE"===e.status&&a.pricing.freeTrial,"TRIAL_EXPIRED"===e.status&&a.pricing.freeTrial,"BASIC"===e.status&&a.pricing.basicPlan,"PRO"===e.status&&a.pricing.proPlan,"MAX"===e.status&&a.pricing.maxPlan]}),(0,s.jsx)("span",{className:"text-xs font-semibold px-2 py-0.5 rounded-full ".concat("TRIAL_EXPIRED"===e.status?"bg-red-200 text-red-700":"bg-green-200 text-green-700"),children:"TRIAL_EXPIRED"===e.status?a.pricing.expired:a.pricing.active})]}),(0,s.jsxs)("p",{className:"text-sm ".concat("TRIAL_EXPIRED"===e.status?"text-red-700":"TRIAL_ACTIVE"===e.status?"text-blue-700":"text-green-700"),children:["TRIAL_ACTIVE"===e.status&&"".concat(a.pricing.trialMessage," ").concat(e.daysRemaining," ").concat(a.pricing.daysRemaining,"."),"TRIAL_EXPIRED"===e.status&&a.pricing.trialExpired,["BASIC","PRO","MAX"].includes(e.status)&&a.pricing.fullAccess]})]})]}),"TRIAL_ACTIVE"===e.status&&null!==e.daysRemaining&&(0,s.jsxs)("div",{className:"text-center bg-white rounded-xl px-8 py-4 shadow-sm",children:[(0,s.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:e.daysRemaining}),(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:a.pricing.daysRemaining})]})]})}),(0,s.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:f.map(t=>{let r=(null==e?void 0:e.status)===t.id;return(0,s.jsxs)("div",{className:"bg-white rounded-2xl border-2 ".concat(r?"border-green-400 ring-4 ring-green-100":t.popular?"border-purple-400 ring-4 ring-purple-100":"border-gray-200"," p-8 relative flex flex-col"),children:[r&&(0,s.jsx)("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:(0,s.jsxs)("span",{className:"bg-green-600 text-white text-sm font-medium px-4 py-1.5 rounded-full shadow-lg flex items-center gap-1.5",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),a.pricing.yourPlan]})}),!r&&t.popular&&(0,s.jsx)("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:(0,s.jsx)("span",{className:"bg-purple-600 text-white text-sm font-medium px-4 py-1.5 rounded-full shadow-lg",children:a.pricing.mostPopular})}),(0,s.jsx)("div",{className:"w-14 h-14 ".concat(t.color," rounded-2xl flex items-center justify-center mb-6"),children:(0,s.jsx)(t.icon,{className:"h-7 w-7 text-white"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:t.description}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-400",children:t.price})}),r?(0,s.jsxs)("button",{disabled:!0,className:"w-full bg-green-100 text-green-700 py-4 rounded-xl font-semibold cursor-default mb-8 flex items-center justify-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),a.pricing.currentPlan]}):(0,s.jsx)("button",{disabled:!0,className:"w-full ".concat(t.bgColor," text-gray-400 py-4 rounded-xl font-semibold cursor-not-allowed mb-8"),children:a.pricing.comingSoon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-4",children:a.pricing.whatsIncluded}),(0,s.jsx)("ul",{className:"space-y-4",children:t.features.map(e=>(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 ".concat(r?"bg-green-100":t.bgColor," rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"),children:(0,s.jsx)(c.Z,{className:"w-4 h-4 ".concat(r?"text-green-600":t.color.replace("bg-","text-"))})}),(0,s.jsx)("span",{className:"text-gray-600",children:e})]},e))})]})]},t.name)})}),(0,s.jsxs)("div",{className:"mt-16 bg-white rounded-2xl border border-gray-200 p-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:a.pricing.faq}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:a.pricing.faqWhenPaid}),(0,s.jsx)("p",{className:"text-gray-600",children:a.pricing.faqWhenPaidAnswer})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:a.pricing.faqTrialExpire}),(0,s.jsx)("p",{className:"text-gray-600",children:a.pricing.faqTrialExpireAnswer})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:a.pricing.faqChangePlans}),(0,s.jsx)("p",{className:"text-gray-600",children:a.pricing.faqChangePlansAnswer})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:a.pricing.faqEnterprise}),(0,s.jsxs)("p",{className:"text-gray-600",children:[a.pricing.faqEnterpriseAnswer," ",(0,s.jsx)("a",{href:"mailto:sales@watergo.uz",className:"text-blue-600 hover:underline",children:"sales@watergo.uz"})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-12 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:a.pricing.haveQuestions}),(0,s.jsx)("a",{href:"mailto:support@watergo.uz",className:"text-blue-600 hover:text-blue-700 font-medium",children:a.pricing.contactSupport})]})]})})]})}},6281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return o},a:function(){return c}});var s=r(7437),a=r(2265),l=r(9376);let i="/api",n=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[g,x]=(0,a.useState)(!0),h=(0,l.useRouter)();(0,l.usePathname)(),(0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user"),r=localStorage.getItem("auth_firm");e&&t&&(m(e),o(JSON.parse(t)),r&&d(JSON.parse(r))),x(!1)},[]);let p=async()=>{o(null),d(null),m(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_firm"),localStorage.removeItem("userType"),localStorage.removeItem("userEmail"),localStorage.removeItem("firmId"),document.cookie="auth-token=; path=/; max-age=0",h.push("/login")},f={user:r,profile:r,token:u,loading:g,signIn:async(e,t)=>{try{console.log("Signing in with API_URL:",i);let r=await fetch("".concat(i,"/auth/staff/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});console.log("Response status:",r.status);let s=await r.json();if(console.log("Response data:",s),!r.ok)throw Error(s.message||"Invalid email or password");let{token:a,user:l,firm:n}=s.data;return m(a),o(l),d(n),localStorage.setItem("auth_token",a),localStorage.setItem("auth_user",JSON.stringify(l)),n&&localStorage.setItem("auth_firm",JSON.stringify(n)),document.cookie="auth-token=".concat(a,"; path=/; max-age=").concat(2592e3),localStorage.setItem("userType","WATERGO_ADMIN"===l.role?"admin":"firm"),localStorage.setItem("userEmail",l.email),l.firmId&&localStorage.setItem("firmId",l.firmId),{error:null,user:l}}catch(e){return console.error("Sign in error:",e),{error:e}}},signOut:p,logout:p,isOwner:(null==r?void 0:r.role)==="OWNER",isManager:(null==r?void 0:r.role)==="MANAGER",isOperator:(null==r?void 0:r.role)==="OPERATOR",isWatergoAdmin:(null==r?void 0:r.role)==="WATERGO_ADMIN",canAccessAllBranches:(null==r?void 0:r.role)==="OWNER"||(null==r?void 0:r.role)==="WATERGO_ADMIN",firm:c,updateFirm:e=>{if(c){let t={...c,...e};d(t),localStorage.setItem("auth_firm",JSON.stringify(t))}}};return(0,s.jsx)(n.Provider,{value:f,children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8116:function(e,t,r){"use strict";r.d(t,{SubscriptionProvider:function(){return n},m:function(){return o}});var s=r(7437),a=r(2265),l=r(6281);let i=(0,a.createContext)(void 0);function n(e){let{children:t}=e,{profile:r,firm:n,loading:o,isWatergoAdmin:c}=(0,l.a)(),[d,u]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),p=(0,a.useCallback)(async()=>{if(!(null==r?void 0:r.firmId)){g(!1);return}if(c||"WATERGO_ADMIN"===r.role){u({status:"MAX",trialStartAt:null,trialEndAt:null,daysRemaining:null,isTrialExpired:!1,hasAccess:!0}),g(!1);return}try{g(!0),h(null);let e=await fetch("".concat("http://localhost:3001","/api/firms/").concat(r.firmId));if(!e.ok)throw Error("Failed to fetch firm details");let t=await e.json(),s=t.success?t.data:t,a=new Date((null==s?void 0:s.createdAt)||new Date),l=new Date(a);l.setDate(l.getDate()+30);let i=new Date,n=Math.ceil((l.getTime()-i.getTime())/864e5),o=n<=0;u({status:o?"TRIAL_EXPIRED":"TRIAL_ACTIVE",trialStartAt:a.toISOString(),trialEndAt:l.toISOString(),daysRemaining:Math.max(0,n),isTrialExpired:o,hasAccess:!o})}catch(e){console.error("Error calculating subscription:",e),h(e.message),u({status:"TRIAL_ACTIVE",trialStartAt:null,trialEndAt:null,daysRemaining:30,isTrialExpired:!1,hasAccess:!0})}finally{g(!1)}},[r,c]);(0,a.useEffect)(()=>{!o&&r?p():o||r||g(!1)},[o,r,p]);let f=(0,a.useCallback)(async()=>{await p()},[p]);return(0,s.jsx)(i.Provider,{value:{subscription:d,loading:m,error:x,refreshSubscription:f},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}}},function(e){e.O(0,[972,545,258,971,117,744],function(){return e(e.s=8054)}),_N_E=e.O()}]);